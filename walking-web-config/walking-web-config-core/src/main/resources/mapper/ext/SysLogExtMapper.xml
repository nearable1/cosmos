<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.xiaoniu.walking.web.core.mapper.ext.SysLogExtMapper">
    <resultMap id="BaseResultMap" type="com.xiaoniu.walking.web.core.model.ext.SysLogExt">
        <!--
          WARNING - @mbg.generated
        -->
        <id column="id" jdbcType="BIGINT" property="id"/>
        <result column="user_id" jdbcType="VARCHAR" property="userId"/>
        <result column="action_module" jdbcType="VARCHAR" property="actionModule"/>
        <result column="action_url" jdbcType="VARCHAR" property="actionUrl"/>
        <result column="action_type" jdbcType="VARCHAR" property="actionType"/>
        <result column="ip_address" jdbcType="VARCHAR" property="ipAddress"/>
        <result column="create_time" jdbcType="TIMESTAMP" property="createTime"/>
        <result column="action_param" jdbcType="LONGVARCHAR" property="actionParam"/>
    </resultMap>

    <sql id="Base_Column_List">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        id, user_id, action_module, action_url, action_type, ip_address, create_time
    </sql>
    <select id="querySysLogByPage" parameterType="com.xiaoniu.walking.web.core.bo.SysLogBO"
            resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from sys_log WHERE 1=1
        <if test="userId !=null">and INSTR(user_id,#{userId}) > 0</if>
        <if test="actionModule !=null">and INSTR(action_module,#{actionModule}) > 0</if>
        <if test="actionType !=null">and INSTR(action_type,#{actionType}) > 0</if>
        <if test="sTime != null and sTime != ''">
            AND create_time <![CDATA[ >= ]]> #{sTime}
        </if>
        <if test="eTime != null and eTime != ''">
            AND create_time <![CDATA[ <= ]]> #{eTime}
        </if>
        order by create_time desc
    </select>
</mapper>